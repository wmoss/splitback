<link rel="import" href="packages/polymer/polymer.html">

<polymer-element name="x-newbill">
  <template>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
  
    <div class="row well">
      <legend>Create A Bill</legend>
      
      <div class="form-group input-group col-md-6">
        <span class="input-group-addon">$</span>
        <input type="text" value="{{total}}" on-input="{{totalUpdated}}" class="form-control" placeholder="How much?">
      </div>
  
      <div class="form-group">
        <input type="text" class="form-control" value="{{notes}}" placeholder="What for?">
      </div>

      <template repeat="{{user in recipients}}">      
        <div>
          <div class="form-group input-group">  
            <span class="input-group-btn">        
              <button type="button" class="btn btn-default {{user.paidClass}}" style="width: 70px" on-click="{{togglePaid}}" data-user-id={{user.id}}>
                {{user.paidText}}
              </button>
            </span>
            <input type="text" autocomplete="off" value="{{user.value}}" class="form-control" 
                   list="datalist-{{user.id}}" on-input="{{maybeTest}}" placeholder="Who else?">
            <datalist id="datalist-{{user.id}}">        
              <template repeat="{{name in friends.keys}}">      
                <option value="{{name}}">
              </template>
            </datalist>
            
            <!-- color: {{colors[$index]}}; -->
            <span class="input-group-addon" style="width: 50px;" on-mouseDown="{{dragAmountStart}}">
              {{user.amount.toStringAsFixed(2)}} <!-- should be empty not 0 if name is "" -->
            </span>
          </div>
        </div>
      </template>
      
      <button type="submit" class="btn btn-default" on-click="{{add}}">Send Bill</button>
      
      <div id="bill-error" class="alert alert-block alert-error fade in" hidden="true">
        <button type="button" class="close" on-click="{{hideAlert}}">x</button>
        <p style="font-weight: bold"></p>
      </div>
      
    </div>
  
  </template>
  
  <script type="application/dart" src="newbill.dart"></script>
</polymer-element>
